<div class="banner-cuisine">
    <% if @cuisine.photo.attached? %>
        <%= cl_image_tag @cuisine.photo.key, crop: :fill %>
    <% else %>
        <img src="https://c8.alamy.com/comp/JB1G0H/food-palette-with-fresh-ingredients-including-herbs-and-spices-JB1G0H.jpg"/>
    <% end %>
    <div class="background-stripe">
        <% if current_user.cuisine_id.to_s == params[:id]%>
            <h1><%= @cuisine.name %></h1>
            <h2>Welcome back <%= current_user.first_name.capitalize %> !</h2>
        <% else %>
            <h1><%= @cuisine.name %></h1>
        <% end %>
    </div>

</div>

<% if current_user.cuisine_id.to_s == params[:id]%>

    <p class="p-custom-css"><strong><%= @cuisine.restaurants.length %></strong> Restaurants available !!!</p>
    
    <h3 class="h3-custom-css">Restaurant list</h3> 
    <div class="horizontal-scroll">
        <% @cuisine_restaurants.each do |restaurant| %>
            <% if restaurant.upvotes.length > 1 %>
                <%= render "shared/medium_restaurant_card", {restaurant: restaurant} %>
            <% end %>
        <% end  %>
    </div>
    <hr style="border: 1px solid rgba(187, 187, 187, 0.41); width:95%; text-align:center; margin: 0 auto;">

    <h3 class="h3-custom-css">Pending restaurant, less than 10 votes</h3> 
        <div class="horizontal-scroll">
            <% @cuisine_restaurants.each do |restaurant| %>
                <% if restaurant.upvotes.length <= 1 %>
                    <%= render "shared/medium_restaurant_card", {restaurant: restaurant} %>
                <% end %>
            <% end  %>
        </div>
    <div class="button-box">
        <button type="button" class="btn btn-primary button" data-toggle="modal" data-target="#restaurantModal">Add a Restaurant</button>
    </div>

    <div class="modal fade" id="restaurantModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-body">
                    <h4> Add a new restaurant</h4>
                    <%= simple_form_for([@cuisine, @restaurant]) do |f| %>
                        <%= f.input :name, label: 'Name' %>
                        <%= f.input :address, label: 'Address' %>
                        <%= f.input :phone, label: 'Phone' %>
                        <%= f.input :vegetarian, as: :radio_buttons, label: 'Vegetarian ?' %>
                        <%= f.button :submit, class: "btn btn-primary" %>
                    <% end %>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
                    </div> 
                </div>
           </div>
        </div>
    </div>
<% else %>

    <p class="p-custom-css"><strong><%= @cuisine.restaurants.length %></strong> Restaurants available !!!</p>

    <h3 class="h3-custom-css">Meet the experts</h3> 
    <div class="horizontal-scroll">
        <% if @cuisine_users.empty? %> 
            <p>"There are no expert for this cuisine type"</p>
        <% else %>
            <% @cuisine_users.each do |user| %>
                <%= render "shared/medium_avatar", {user: user} %>
            <% end %>
        <% end %> 
    </div>
    <hr style="border: 1px solid rgba(187, 187, 187, 0.41); width:95%; text-align:center; margin: 0 auto;">
    
    <h3 class="h3-custom-css">Restaurant list</h3>
    <div class="restaurant_card_container_home">
        <% @cuisine_restaurants.each do |restaurant| %>
            <% if restaurant.upvotes.length > 1 %>
                <div class="my-3">
                    <%= render "shared/medium_restaurant_card", {restaurant: restaurant} %>
                </div>
            <% end %>
        <% end  %>
    </div> 
<% end %>